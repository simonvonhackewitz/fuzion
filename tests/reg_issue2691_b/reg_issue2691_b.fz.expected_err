
--CURDIR--/reg_issue2691_b.fz:34:9: error 1: Syntax error: expected 'is', or '=>' in routine declaration, found keyword 'else'
        else true       # causes a syntax error NYI: an indentation error would be nicer
--------^
While parsing: implRout, parse stack: implRout, routOrField, feature, expr, exprs, block, implRout, routOrField, feature, expr, exprs, block, implRout, implFldOrRout, routOrField, feature, expr, exprs, block, unit


--CURDIR--/reg_issue2691_b.fz:33:14: error 2: Incompatible types in branches of if expression
    pre else if x < -10 then false
-------------^^^^^^^^^^^^^^^^^^^^^
Incompatible result types in different branches:
block returns value of type 'bool' at --CURDIR--/reg_issue2691_b.fz:33:30:
    pre else if x < -10 then false
-----------------------------^^^^^
block returns value of type 'unit' at --CURDIR--/reg_issue2691_b.fz:33:14:
    pre else if x < -10 then false
-------------^


--CURDIR--/reg_issue2691_b.fz:33:5: error 3: Illegal forward or cyclic type inference
    pre else if x < -10 then false
----^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The definition of a field using ':=', or of a feature or function
using '=>' must not create cyclic type dependencies.
Referenced feature: 'reg_issue2691_b.h.chk' at --CURDIR--/reg_issue2691_b.fz:32:11:
    redef chk(x i32)
----------^^^


--CURDIR--/reg_issue2691_b.fz:32:11: error 4: Failed to infer result type for feature 'reg_issue2691_b.h.chk'.
    redef chk(x i32)
----------^^^
To solve this, please specify a result type explicitly.


--CURDIR--/reg_issue2691_b.fz:33:14: error 5: Incompatible types in assignment
    pre else if x < -10 then false
-------------^
assignment to field : 'reg_issue2691_b.h.pre chk.result'
expected formal type: 'bool'
actual type found   : 'unit'
assignable to       : 'unit'
for value assigned  : ''
To solve this, you could change the type of the target 'reg_issue2691_b.h.pre chk.result' to 'unit' or convert the type of the assigned value to 'bool'.

5 errors.
